### å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ
[![](https://shields.io/badge/author-eduartexd-blue?logo=github&style=for-the-badge)](https://github.com/EduarteXD/) [![](https://shields.io/badge/blog-visit-green?style=for-the-badge&logo=WordPress)](https://oxdl.cn) [![](https://shields.io/badge/releases-view-pink?style=for-the-badge)](https://github.com/EduarteXD/BookManager/releases)


****

#### åŸºæœ¬åŠŸèƒ½

- å›¾ä¹¦æœç´¢ï¼Œå…¥åº“
- å›¾ä¹¦å€Ÿè¿˜
- é€¾æœŸæé†’
- åŸºæœ¬æƒé™ç®¡ç†
- ä¸€ä¸ªåŸºæœ¬çš„ISBNæ£€ç´¢å›¾ä¹¦Api

#### å›¾ä¹¦æœç´¢ä¸å…¥åº“

å®ç°ç”±ISBNç¼–ç ç²¾ç¡®æœç´¢å›¾ä¹¦å¹¶å…¥åº“æˆ–åœ¨åº“å­˜ä¸­æŒ‰ç…§ä¹¦åè¿›è¡Œæ¨¡ç³Šæœç´¢

![](https://cdn.oxdl.cn/picgo/image-20220605100954260.png?x-oss-process=image/resize,h_500)

ä¸»é¡µğŸ‘†

![](https://cdn.oxdl.cn/picgo/image-20220605000242428.png?x-oss-process=image/resize,h_500)

æŒ‰ç…§ISBNå·æœç´ Be likeğŸ‘†ï¼Œæ­¤æ—¶ç”±äºæ­¤ä¹¦ä¸åœ¨åº“ä¸­ï¼Œç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥å°†å…¶æ·»åŠ åˆ°ä¹¦åº“ï¼Œå¹¶ä¿®æ”¹å›¾ä¹¦åŸºæœ¬ä¿¡æ¯å’Œæ·»åŠ æ•°é‡ğŸ‘‡

![](https://cdn.oxdl.cn/picgo/image-20220605000538589.png?x-oss-process=image/resize,h_500)



![](https://cdn.oxdl.cn/picgo/image-20220605000754584.png?x-oss-process=image/resize,h_500)

æ¨¡ç³Šæœç´ ğŸ‘†

#### å›¾ä¹¦å€Ÿè¿˜ç®¡ç†

![](https://cdn.oxdl.cn/picgo/image-20220605101200507.png?x-oss-process=image/resize,h_500)

å½“æœç´¢åˆ°æƒ³è¦å€Ÿé˜…çš„ä¹¦ç›®ï¼Œè¿›å…¥è¯¦æƒ…é¡µåï¼Œå¯ä»¥è¿›è¡Œå€Ÿé˜…ğŸ‘†ï¼Œæ­¤æ—¶æ­¤ä¹¦ä¼šè¢«åŠ å…¥åˆ°å€Ÿé˜…æ¸…å•ä¸­ï¼Œä½†å¹¶ä¸ä¼šæ‰£å‡åº“å­˜ï¼Œå¯ä»¥è¢«ä»–äººæŠ¢å 

![](https://cdn.oxdl.cn/picgo/image-20220605102204968.png?x-oss-process=image/resize,h_500)

ç‚¹å‡»å€Ÿé˜…æŒ‰é’®å³å¯å®Œæˆå°šæœ‰åº“å­˜ä¹¦ç›®çš„å€Ÿé˜…å¹¶è‡ªåŠ¨æ¸…ç†å€Ÿé˜…æ¸…å•ğŸ‘†ï¼Œæ­¤æ—¶ä¼šå°†ç›¸åº”å›¾ä¹¦çš„åº“å­˜ä»æ•°æ®åº“ä¸­å‡å»ï¼Œå®Œæˆå€Ÿé˜…

![](https://cdn.oxdl.cn/picgo/image-20220605102529406.png?x-oss-process=image/resize,h_500)

#### é€¾æœŸæé†’

å®Œæˆå€Ÿé˜…ä¹‹åå¯ä»¥è¿›å…¥è¿˜ä¹¦é¡µé¢æŸ¥çœ‹å€Ÿé˜…çš„ä¹¦ç›®ï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºå°†å…¶ä¸­ä¸€æœ¬ä¹¦çš„å€Ÿé˜…æ—¶é—´æ‰‹åŠ¨è°ƒæ•´åˆ°äº†21å¤©å‰ğŸ‘†ï¼Œæ­¤æ—¶ç¬¬ä¸€æœ¬ä¹¦å·²ç»é€¾æœŸï¼Œå¯ä»¥çœ‹åˆ°åœ¨é¡µé¢åŠ è½½å®Œæˆåï¼Œä¼šå¼¹å‡ºæç¤ºè¿˜ä¹¦çš„é€šçŸ¥ğŸ‘‡

![image-20220605102815057](https://cdn.oxdl.cn/picgo/image-20220605102815057.png)

![](https://cdn.oxdl.cn/picgo/image-20220605103003042.png?x-oss-process=image/resize,h_500)



å½“ç„¶ï¼Œå¦‚æœä½ çš„æµè§ˆå™¨ä¸å¹¸ä¸æ”¯æŒNotification Apiæˆ–æ˜¯æ‹’ç»äº†é€šçŸ¥æƒé™ï¼Œæˆ‘ä»¬æœ‰æ›¿ä»£æ–¹æ¡ˆğŸ‘†

![](https://cdn.oxdl.cn/picgo/image-20220605103117111.png?x-oss-process=image/resize,h_500)

å½“ä½ æœ‰ä¹¦æœ¬é€¾æœŸæ—¶å€™ï¼Œä½ å°†æ— æ³•å€Ÿé˜…æ–°ä¹¦ğŸ‘†

#### åŸºæœ¬æƒé™ç®¡ç†

ç”¨æˆ·è¢«åˆ†ä¸ºä¸‰ä¸ªç­‰çº§ï¼šæ¸¸å®¢ï¼Œç”¨æˆ·å’Œç®¡ç†å‘˜

- æ¸¸å®¢å¯ä»¥å¯¹ä¹¦ç±è¿›è¡Œæ£€ç´¢ä½†æ— æƒå€Ÿé˜…
- ç”¨æˆ·å¯ä»¥å€Ÿé˜…12æœ¬ä¹¦
- ç®¡ç†å‘˜å¯ä»¥æ·»åŠ ä¹¦ç›®å…¥åº“ä¸è®¿é—®åº“å­˜

åœ¨æ­¤ä¸å¤šä½œæ¼”ç¤º

#### å›¾ä¹¦æ£€ç´¢Api

æœ€åï¼Œå½“ç„¶ï¼Œä¹Ÿæ˜¯éå¸¸é‡è¦çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œä»¥ä¸Šæ£€ç´¢å›¾ä¹¦å’Œå…¥åº“å®é™…ä¸Šä¹Ÿæ˜¯åŸºäºæ­¤åŠŸèƒ½

![](https://cdn.oxdl.cn/picgo/image-20220605103547360.png?x-oss-process=image/resize,h_500)

ä»¥ä¸Šä¸ºåŠŸèƒ½ä»‹ç»

#### éƒ¨ç½²

é¦–å…ˆåˆ›å»ºæ•°æ®åº“ï¼š

```mermaid
erDiagram
	Inventory {
		INT bookId
		BIGINT isbn
		TEXT bookname
		TEXT authors
		TEXT description
		TEXT photo
		TEXT publisher
		TEXT price
		TEXT category
		TEXT stock
		TEXT borrowed
	}
    Users {
    	INT uid
    	TEXT name
    	TEXT email
    	TEXT pwd
    	INT role
    	INT borrowed
    }
    Tracker {
    	INT uid
    	TEXT tracker
    }
    Borrowed {
    	INT uid
    	BIGINT isbn
    	TIMESTAMP time
    }
    Users ||--o| Tracker : has
    Borrowed }o--|| Inventory : refers
    Borrowed }o--|| Users : refers
```

```sql
CREATE TABLE `users` (
	`uid` INT(10) NOT NULL AUTO_INCREMENT,
	`name` TEXT NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
	`email` TEXT NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
	`pwd` TEXT NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
	`role` INT(10) NULL DEFAULT NULL,
	`borrowed` INT(10) NULL DEFAULT '0',
	PRIMARY KEY (`uid`) USING BTREE
)
COLLATE='utf8mb4_bin'
ENGINE=InnoDB
AUTO_INCREMENT=0;

CREATE TABLE `trackers` (
	`tracker` TEXT NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
	`uid` INT(10) NULL DEFAULT NULL
)
COLLATE='utf8mb4_bin'
ENGINE=InnoDB;

CREATE TABLE `inventory` (
	`bookid` INT(10) NOT NULL AUTO_INCREMENT,
	`isbn` BIGINT(19) NULL DEFAULT NULL,
	`bookname` TEXT NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
	`authors` TEXT NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
	`description` TEXT NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
	`photo` TEXT NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
	`publisher` TEXT NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
	`price` TEXT NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
	`category` TEXT NULL DEFAULT NULL COLLATE 'utf8mb4_bin',
	`stock` INT(10) NULL DEFAULT NULL,
	`borrowed` INT(10) NULL DEFAULT '0',
	PRIMARY KEY (`bookid`) USING BTREE,
	UNIQUE INDEX `isbn` (`isbn`) USING BTREE,
	CONSTRAINT `CC1` CHECK ((`borrowed` <= `stock`))
)
COLLATE='utf8mb4_bin'
ENGINE=InnoDB
AUTO_INCREMENT=0;

CREATE TABLE `borrowed` (
	`uid` INT(10) NULL DEFAULT NULL,
	`isbn` BIGINT(19) NULL DEFAULT NULL,
	`time` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP
)
COLLATE='utf8mb4_bin'
ENGINE=InnoDB;
```

ä¸‹è½½

```shell
mkdir bookManager
cd bookManager
wget https://github.com/EduarteXD/BookManager/releases/download/beta/release.zip && unzip release.zip
rm -rf release.zip
```

åœ¨/bookManagerç›®å½•ä¸‹åˆ›å»º.envé…ç½®æ–‡ä»¶

```
SQL_HOST=localhost
DB_NAME=åº“å
DB_USER=ç”¨æˆ·å
DB_PWD=å¯†ç 
```

è¿è¡Œ

```shell
npm install
npm start
```

é…ç½®Nginxåå‘ä»£ç†åå°WebSocketè¿æ¥

```ng
location ^~ /socket.io/
{
    proxy_pass http://127.0.0.1:1333/socket.io/;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
}
```

##### Hint

ä½ å¯ä»¥åœ¨.envæ–‡ä»¶ä¸­æ·»åŠ PORTå­—æ®µæ¥æ›´æ”¹æœåŠ¡ç«¯ç›‘å¬ç«¯å£
